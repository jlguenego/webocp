<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Web OCP</title>
		<script src="../_ext/jquery-1.10.2.min.js"></script>
		<script src="../_ext/jquery-ui-1.10.3/ui/minified/jquery-ui.min.js"></script>
		<link rel="stylesheet" href="../_ext/jquery-ui-1.10.3/themes/base/minified/jquery-ui.min.css" />

		<script src="../js/ocp/core.js"></script>

		<style>
html, body {
	margin: 0px;
	padding: 0px;
	height: 100%;
}
		</style>
	</head>

	<body>
		<input type="text" id="filename" name="filename" />
		<textarea></textarea>
		<button>Send</button>

		<script>
			$('button').click(function() {
				var content = $('textarea').val();
				var filename = $('#filename').val();
				$.ajaxSetup({
					cache: false,
					scriptCharset: "utf-8"
				});

				var result = null;
				$.ajax({
					type: "POST",
					url: 'http://localhost/webocp/server/test/endpoint/create_file_from_string.php',
					async: false,
					data: {
						filename: filename,
						content: content
					},
					success: function(data) {
						console.log(data);
						var output = $.parseJSON(data);
						if (output.error) {
							throw new OCPException('Server answered: ' + output.error);
						}
						if (output.result) {
							result = output.result;
						}
					},
					error: function(jqXHR, textStatus, errorThrown) {
						console.log('ajax_ls error');
						console.log('jqXHR=' + jqXHR + "\ntextStatus=" + textStatus + "\nerrorThrown=" + errorThrown);
					},
					statusCode: {
						404: function() {
							console.log("page not found");
						}
					}
				});
			});
		</script>
	</body>
</html>